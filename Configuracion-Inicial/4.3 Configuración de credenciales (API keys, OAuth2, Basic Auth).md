# 4.3 Configuraci贸n de credenciales (API Keys, OAuth2, Basic Auth)

La gesti贸n adecuada de credenciales es un pilar esencial en cualquier plataforma de automatizaci贸n, especialmente en n8n, dado su enfoque en la integraci贸n de servicios externos a trav茅s de conectores (nodos). Esta secci贸n describe las mejores pr谩cticas y los procedimientos recomendados para configurar credenciales seguras en n8n, habilitando una comunicaci贸n autenticada con APIs y servicios de terceros.

##  Objetivo

El objetivo es garantizar que las integraciones externas operen de manera segura, robusta y con el m铆nimo privilegio necesario, utilizando los siguientes m茅todos de autenticaci贸n soportados por n8n:

- **API Key**
- **OAuth2**
- **Autenticaci贸n B谩sica (Basic Auth)**

---

## 4.3.1 Configuraci贸n de credenciales mediante API Key

El uso de API Keys es una pr谩ctica com煤n para autenticar peticiones contra servicios RESTful. En n8n, se puede configurar una credencial de este tipo desde la interfaz de administraci贸n siguiendo estos pasos:

1. Acceder al panel de administraci贸n de n8n (`http://localhost:5678/` o la URL configurada).
2. Ir a la secci贸n **"Credenciales"**.
3. Seleccionar el servicio correspondiente (por ejemplo: Google Sheets API, SendGrid, Mailchimp, etc.).
4. Seleccionar el tipo de autenticaci贸n como **API Key**.
5. Introducir la clave proporcionada por el proveedor del servicio.
6. Guardar y asociar la credencial al nodo correspondiente en el flujo de trabajo.

> **Recomendaci贸n:** Siempre que sea posible, restringir las API Keys por direcci贸n IP o dominio, y otorgar permisos m铆nimos (principio de menor privilegio).

---

## 4.3.2 Configuraci贸n de OAuth2

n8n proporciona soporte nativo para OAuth 2.0, permitiendo una autenticaci贸n segura basada en tokens. Esta opci贸n es especialmente recomendable cuando se integran servicios como Google, GitHub, Slack o Dropbox.

### Procedimiento general:

1. Registrar una aplicaci贸n en el proveedor externo (por ejemplo, Google Cloud Console o GitHub Developer Settings).
2. Obtener el **Client ID** y el **Client Secret**.
3. En n8n:
   - Ir a **Credenciales > Crear Nueva > Seleccionar servicio**.
   - Elegir **OAuth2** como m茅todo de autenticaci贸n.
   - Rellenar los campos requeridos:
     - **Client ID**
     - **Client Secret**
     - **Scopes** (si aplica)
     - **Redirect URI** (n8n proporciona una por defecto, debe ser registrada en el proveedor externo).
   - Guardar y autorizar el acceso.

> **Nota t茅cnica:** n8n act煤a como cliente OAuth2 y utiliza el flujo de autorizaci贸n est谩ndar. Es importante asegurarse de que el redirect URI coincida exactamente con el registrado en el proveedor.

---

## 4.3.3 Configuraci贸n de Autenticaci贸n B谩sica (Basic Auth)

La autenticaci贸n b谩sica es un mecanismo simple pero eficaz para proteger recursos HTTP. Aunque es menos segura que OAuth2 o API Keys (especialmente sin HTTPS), sigue siendo v谩lida para servicios internos o entornos controlados.

### Pasos para configurar:

1. Seleccionar el nodo de servicio deseado que soporte autenticaci贸n b谩sica.
2. Ir a **Credenciales** y seleccionar **Basic Auth**.
3. Ingresar:
   - **Nombre de usuario**
   - **Contrase帽a**
4. Guardar y asociar al flujo de trabajo correspondiente.

> **Advertencia:** Nunca utilizar Basic Auth en producci贸n sin HTTPS. Se recomienda solo para entornos internos o pruebas.

---

## 4.3.4 Buenas pr谩cticas en gesti贸n de credenciales

- **Rotaci贸n peri贸dica de claves y secretos.**
- **Uso de variables de entorno** para valores sensibles (n8n permite definir credenciales a trav茅s del archivo `.env` o configuraciones en el `docker-compose.yml`).
- **Auditor铆a de credenciales inactivas:** eliminar claves o accesos que no est茅n en uso.
- **Segmentaci贸n de privilegios:** cada integraci贸n debe contar con sus propias credenciales, evitando el uso compartido.
- **Control de acceso:** limitar qu茅 usuarios pueden crear, ver o modificar credenciales en n8n.

---

## 4.3.5 Consideraciones avanzadas

En entornos productivos, se recomienda montar un secreto externo (vault) como **HashiCorp Vault** o **AWS Secrets Manager** para manejar las credenciales de forma centralizada.

n8n tambi茅n permite el uso de `n8n-nodes-base.credentials.override` para inyectar valores de credenciales desde el entorno de ejecuci贸n, evitando almacenarlas en la base de datos.

Con esta configuraci贸n, n8n queda capacitado para conectar de forma segura con m煤ltiples servicios externos, respetando est谩ndares de seguridad y operando con la flexibilidad necesaria para ambientes de desarrollo, staging y producci贸n.

---

<div align="center" style="border: 1px solid #4F8AFA; border-radius: 12px; padding: 20px; background: #f0f6ff; margin-top: 32px; display: flex; justify-content: center; gap: 32px;">
  <a href="4.2%20Registro%20de%20usuarios%20y%20control%20de%20acceso.md" style="text-decoration:none; font-weight: bold; color: #4F8AFA; font-size: 1.1em;">猬锔 Anterior: 4.2 Registro de usuarios y control de acceso</a>
  <a href="4.4%20Configuraci贸n%20de%20Webhooks.md" style="text-decoration:none; font-weight: bold; color: #4F8AFA; font-size: 1.1em;">★ Siguiente: 4.4 Configuraci贸n de Webhooks</a>
</div>