<div style="border: 2px solid #4F8AFA; border-radius: 10px; background: #f0f6ff; padding: 18px; margin-bottom: 24px;">
  <strong>💡 Resumen:</strong> Recomendaciones para establecer un entorno de desarrollo local consistente, reproducible y seguro para trabajar con n8n.
</div>

---

🎯 Objetivo
Establecer un entorno de desarrollo consistente, reproducible y seguro para trabajar con n8n de forma local, facilitando pruebas, personalizaciones y contribuciones sin comprometer la integridad del sistema ni la seguridad de la estación de trabajo.

🧱 Fundamentos de una arquitectura de desarrollo sólida
Aislamiento del entorno

Usar Docker o entornos virtualizados (como WSL2 en Windows o VMs en Linux/macOS) permite encapsular la instalación, reduciendo conflictos con otros proyectos o servicios del sistema operativo anfitrión.

Se recomienda mantener separados los entornos de desarrollo, test y producción, incluso en contextos locales, mediante archivos .env y configuración de contenedores diferenciados.

Gestión de configuración sensible

Utilizar archivos .env para gestionar credenciales y claves API. Nunca versionar estos archivos directamente en Git.

Centralizar la configuración en archivos versionables (config.ts, docker-compose.override.yml) que respeten el principio de inmutabilidad de configuración por entorno.

Gestión de versiones

Mantener controlada la versión de Node.js (mediante nvm o Volta) y Docker Engine. Se recomienda anclar versiones mínimas compatibles en el repositorio (.nvmrc, package.json y engines).

Usar yarn.lock o package-lock.json de forma estricta para evitar derivaciones en dependencias.

Estrategia de volúmenes y persistencia

En Docker, mapear volúmenes para:

Flujos (/home/node/.n8n)

Bases de datos embebidas o externas (ej. SQLite, PostgreSQL)

Logs y backups

Esto permite persistencia y facilita debugging o rollback.

Conectividad externa

Permitir puertos específicos y controlados (por defecto: 5678).

En entorno local, se puede exponer el puerto vía localhost o crear redes virtuales de desarrollo (docker network create) para interconectar servicios (como PostgreSQL, Redis, etc.)

Editor de código e integración con herramientas

Usar VS Code con extensiones como:

n8n-node-dev

Docker

ESLint + Prettier

REST Client para pruebas de endpoints

Configurar tareas automáticas (launch.json, tasks.json) para facilitar debugging, hot-reloading y ejecución de pruebas.

Testing local y validación

Implementar pruebas de flujos mediante entornos simulados (mock de APIs externas).

Recomendado: ejecutar validaciones automáticas (eslint, prettier, tests unitarios) previo a cada commit o push mediante husky o scripts de pre-commit.

Backups y snapshots

Automatizar respaldos regulares de flujos, credenciales y variables de entorno.

Utilizar scripts locales (cron, bash, node) o herramientas como Restic o Duplicati para backups locales de directorios mapeados.

Acceso y trazabilidad

Definir usuarios técnicos para desarrollo, distintos a usuarios de producción.

Activar logs extendidos (logLevel: debug) para facilitar análisis.

🪟 Consideraciones específicas en Windows
Usar WSL2 con Ubuntu como entorno predilecto para desarrollo local. Permite ejecución de Docker y Node.js con comportamiento idéntico al entorno Linux.

Configurar correctamente volúmenes compartidos para evitar problemas de rendimiento y permisos.

Docker Desktop debe tener activado WSL2 como backend para contenedores.

Evitar entornos mixtos (instalar Node.js tanto en Windows como WSL) para evitar inconsistencias.

🧩 Estandarización y DevOps
Documentar el entorno local requerido en el repositorio del proyecto (docs/entorno-desarrollo.md).

Emplear plantillas de configuración (.env.example, docker-compose.dev.yml) para homogeneizar el onboarding de nuevos desarrolladores.

Incorporar scripts de bootstrap (setup.sh, init-dev.sh) para automatizar la preparación del entorno.

---

<div align="center" style="border: 1px solid #4F8AFA; border-radius: 12px; padding: 20px; background: #f0f6ff; margin-top: 32px; display: flex; justify-content: center; gap: 32px;">
  <a href="2.3.%20Instalacion%20de%20dependencias%20base.md" style="text-decoration:none; font-weight: bold; color: #4F8AFA; font-size: 1.1em;">⬅️ Anterior: 2.3 Instalación de dependencias base</a>
  <a href="../Introduccion-General/1.1.%20Que-es-n8n.md" style="text-decoration:none; font-weight: bold; color: #4F8AFA; font-size: 1.1em;">➡️ Siguiente: 1.1 ¿Qué es n8n?</a>
</div>